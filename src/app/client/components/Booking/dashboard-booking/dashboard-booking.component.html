<div class="container mx-auto p-4 space-y-6">
  <!-- Barra de Búsqueda -->
  <div class="bg-white shadow rounded-md p-4 space-y-4">
    <h2 class="text-xl font-bold text-gray-700">Buscar Reservas</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
      <!-- Vuelo ID -->
      <div>
        <label for="vueloId" class="block text-sm font-medium text-gray-700">Vuelo ID</label>
        <input
          id="vueloId"
          [(ngModel)]="searchParams.vueloId"
          type="text"
          class="block w-full mt-2 p-3 border rounded-md text-base"
        />
      </div>

      <!-- Fecha de Reserva -->
      <div>
        <label for="fecha" class="block text-sm font-medium text-gray-700">Fecha de Reserva</label>
        <input
          id="fecha"
          [(ngModel)]="searchParams.fecha"
          type="date"
          class="block w-full mt-2 p-3 border rounded-md text-base"
        />
      </div>

      <!-- Fecha de Vuelo -->
      <div>
        <label for="fechaVuelo" class="block text-sm font-medium text-gray-700">Fecha de Vuelo</label>
        <input
          id="fechaVuelo"
          [(ngModel)]="searchParams.fecha"
          type="date"
          class="block w-full mt-2 p-3 border rounded-md text-base"
        />
      </div>

      <!-- Botón Buscar -->
      <div class="flex items-end">
        <button
          (click)="buscarReservas()"
          class="bg-indigo-600 text-white w-full py-3 px-6 rounded-md hover:bg-indigo-700 transition-all flex items-center justify-center"
        >
          Buscar
        </button>
      </div>
    </div>
  </div>


  <!-- Listado de Reservas -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
    <div
      *ngFor="let booking of filteredBookings"
      class="bg-white shadow rounded-md p-4 flex flex-col space-y-4"
    >
      <!-- Header -->
      <div class="flex justify-between items-center border-b pb-2">
        <h3 class="text-lg font-bold">Vuelo ID - {{ booking.id }}</h3>
        <p class="text-sm text-gray-500">{{ booking.fechaReserva }}</p>
      </div>

      <!-- Body -->
      <div class="space-y-2">
        <p class="text-base"><strong>Aerolínea:</strong> {{ booking.aerolinea }}</p>
        <p class="text-base">
          <strong>Ruta:</strong> {{ booking.origen }} → {{ booking.destino }}
        </p>
        <p class="text-base">
          <strong>Fecha de Salida:</strong> {{ booking.fechaSalida | date: 'dd/MM/yyyy' }}
        </p>
        <p class="text-base"><strong>Precio:</strong> ${{ booking.precio }}</p>
        <p class="text-base"><strong>Asientos:</strong> {{ booking.asientos }}</p>
      </div>

      <!-- Footer -->
      <div class="flex justify-between items-center pt-2 border-t">
        <button
          (click)="openCancelModal(booking)"
          class="bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-all flex items-center space-x-2"
        >
          <span class="material-icons">cancel</span>
          <span>Cancelar</span>
        </button>
        <div class="flex space-x-4">
          <button
          (click)="openEditModal(booking)"
          class="text-blue-600 hover:text-blue-800 flex items-center space-x-1">
            <span class="material-icons">edit</span>
          </button>
          <button class="text-gray-600 hover:text-gray-800 flex items-center space-x-1">
            <span class="material-icons">delete</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de Cancelación -->
  <div
    class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center px-2 sm:px-4"
    *ngIf="showCancelModal"
  >
    <div class="bg-white rounded-lg shadow-lg w-full max-w-sm max-h-[90vh] p-4 flex flex-col space-y-4">
      <h2 class="text-lg font-bold">¿Está seguro de cancelar el vuelo?</h2>
      <p>Vuelo ID: {{ bookingToCancel?.id }}</p>
      <div class="flex justify-end space-x-4">
        <button
          (click)="closeCancelModal()"
          class="bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600"
        >
          Cancelar
        </button>
        <button
          (click)="confirmCancel()"
          class="bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700"
        >
          Aceptar
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal para editar reserva -->
<app-add-booking
  [showModal]="showAddBookingModal"
  [flightData]="bookingToEdit"
  (close)="closeAddBookingModal()"
  (book)="saveEditedBooking($event)"
></app-add-booking>

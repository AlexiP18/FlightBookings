<div class="container mx-auto p-4 space-y-6">
  <!-- Barra de Búsqueda -->
  <div class="bg-white shadow rounded-md p-4 space-y-4">
    <h2 class="text-xl font-bold text-gray-700">Buscar Vuelos</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4">
      <!-- Origen -->
      <div>
        <label for="origen" class="block text-sm font-medium text-gray-700">Origen</label>
        <select
          id="origen"
          [(ngModel)]="searchParams.origen"
          class="block w-full mt-2 p-3 border rounded-md text-base"
        >
          <option *ngFor="let origin of origenes" [value]="origin">
            {{ origin }}
          </option>
        </select>
      </div>

      <div class="relative">
        <label for="destino" class="block text-sm font-medium text-gray-700">Destino</label>
        <input
          id="destino"
          formControlName="destino"
          type="text"
          placeholder="Buscar destino..."
          class="block w-full mt-2 p-3 border rounded-md text-base"
          (focus)="onSearchCity($event)"
          (input)="onSearchCity($event)"
          (blur)="showCityList = false"
        />
        <ul
          class="absolute z-10 bg-white border rounded-md w-full max-h-40 overflow-y-auto mt-1 shadow-lg custom-scrollbar"
          *ngIf="showCityList"
        >
          <li
            *ngFor="let city of filteredCiudades"
            (mousedown)="selectCity(city)"
            class="px-3 py-2 hover:bg-gray-100 cursor-pointer"
          >
            {{ city }}
          </li>
        </ul>
      </div>

      <!-- Fecha -->
      <div>
        <label for="fecha" class="block text-sm font-medium text-gray-700">Fecha</label>
        <input
          id="fecha"
          [(ngModel)]="searchParams.fecha"
          type="date"
          class="block w-full mt-2 p-3 border rounded-md text-base"
        />
      </div>

      <!-- Cantidad de Pasajeros -->
      <div>
        <label for="pasajeros" class="block text-sm font-medium text-gray-700">Pasajeros</label>
        <input
          id="pasajeros"
          [(ngModel)]="searchParams.pasajeros"
          type="number"
          min="1"
          class="block w-full mt-2 p-3 border rounded-md text-base"
        />
      </div>

      <!-- Botón Buscar -->
      <div class="flex items-end">
        <button
          (click)="buscarVuelos()"
          class="bg-indigo-600 text-white w-full py-3 px-6 rounded-md hover:bg-indigo-700 transition-all"
        >
          Buscar
        </button>
      </div>
    </div>
  </div>

  <!-- Listado Dinámico -->
  <div class="bg-white shadow rounded-md p-4">
    <h2 class="text-xl font-bold text-gray-700 mb-4">Resultados</h2>
    <div *ngFor="let vuelo of vuelosFiltrados" class="border-b last:border-0 py-4 flex justify-between items-center">
      <div>
        <h3 class="text-lg font-semibold">{{ vuelo.aerolinea }}</h3>
        <p class="text-sm text-gray-500">Precio: ${{ vuelo.precio }}</p>
        <p class="text-sm text-gray-500">Asientos Disponibles: {{ vuelo.asientos }}</p>
      </div>
      <button
        (click)="openAddBookingModal(vuelo)"
        class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-all"
      >
        Reservar
      </button>
    </div>
    <button
      *ngIf="hayMasVuelos"
      (click)="cargarMasVuelos()"
      class="bg-indigo-600 text-white w-full py-3 px-6 rounded-md hover:bg-indigo-700 transition-all mt-4"
    >
      Cargar Más
    </button>
  </div>
</div>

<!-- Modal de Reserva -->
<app-add-booking
  [showModal]="showAddBookingModal"
  [flightData]="selectedFlight"
  [searchParams]="searchParams"
  (close)="closeAddBookingModal()"
  (book)="addBooking($event)"
></app-add-booking>
